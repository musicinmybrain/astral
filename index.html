
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Astral v3.2 &#8212; Astral 3.2 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="_static/astral.css?v=1d95e8bb" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="_static/documentation_options.js?v=28cc826a"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'index';</script>
    <link rel="icon" href="_static/weather-sunny.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The astral Package" href="package.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="#">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/earth_sun.png" class="logo__image only-light" alt="Astral 3.2 documentation - Home"/>
    <script>document.write(`<img src="_static/earth_sun.png" class="logo__image only-dark" alt="Astral 3.2 documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="package.html">The <code class="xref py py-mod docutils literal notranslate"><span class="pre">astral</span></code> Package</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/index.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Astral v3.2</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Astral v3.2</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sun">Sun</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#moon">Moon</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#phase">Phase</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#geocoder">Geocoder</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#custom-location">Custom Location</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-locations">Additional Locations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#timezone-groups">Timezone Groups</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#effect-of-elevation">Effect of Elevation</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#times-of-the-sun">Times Of The Sun</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#elevation-of-the-sun">Elevation Of The Sun</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#effect-of-refraction">Effect of Refraction</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#license">License</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#cities">Cities</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#us-cities">US Cities</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#thanks">Thanks</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#contact">Contact</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#version-history">Version History</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="astral-vrelease">
<h1>Astral v3.2<a class="headerlink" href="#astral-vrelease" title="Link to this heading">#</a></h1>
<div class="line-block">
<div class="line"><img alt="ghaction_status" src="https://img.shields.io/github/actions/workflow/status/sffjunkie/astral/astral-test.yml" /> <a class="reference external" href="https://pypi.org/project/astral/"><img alt="pypi_ver" src="https://img.shields.io/pypi/v/astral.svg" /></a></div>
</div>
<p>Astral is a python package for calculating the times of various aspects of
the sun and moon.</p>
<p>It can calculate the following</p>
<dl class="simple">
<dt>Dawn</dt><dd><p>The time in the morning when the sun is a specific number of degrees
below the horizon.</p>
</dd>
<dt>Sunrise</dt><dd><p>The time in the morning when the top of the sun breaks the horizon
(assuming a location with no obscuring features.)</p>
</dd>
<dt>Noon</dt><dd><p>The time when the sun is at its highest point directly above the observer.</p>
</dd>
<dt>Midnight</dt><dd><p>The time when the sun is at its lowest point.</p>
</dd>
<dt>Sunset</dt><dd><p>The time in the evening when the sun is about to disappear below the
horizon (asuming a location with no obscuring features.)</p>
</dd>
<dt>Dusk</dt><dd><p>The time in the evening when the sun is a specific number of degrees
below the horizon.</p>
</dd>
<dt>Daylight</dt><dd><p>The time when the sun is up i.e. between sunrise and sunset</p>
</dd>
<dt>Night</dt><dd><p>The time between astronomical dusk of one day and astronomical dawn of the
next</p>
</dd>
<dt>Twilight</dt><dd><p>The time between dawn and sunrise or between sunset and dusk</p>
</dd>
<dt>The Golden Hour</dt><dd><p>The time when the sun is between 4 degrees below the horizon and 6 degrees
above.</p>
</dd>
<dt>The Blue Hour</dt><dd><p>The time when the sun is between 6 and 4 degrees below the horizon.</p>
</dd>
<dt>Time At Elevation</dt><dd><p>the time when the sun is at a specific elevation for either a rising or a
setting sun.</p>
</dd>
<dt>Solar Azimuth</dt><dd><p>The number of degrees clockwise from North at which the sun can be seen</p>
</dd>
<dt>Solar Zenith</dt><dd><p>The angle of the sun down from directly above the observer</p>
</dd>
<dt>Solar Elevation</dt><dd><p>The number of degrees up from the horizon at which the sun can be seen</p>
</dd>
<dt><a class="reference external" href="http://en.wikipedia.org/wiki/Rahukaalam">Rahukaalam</a></dt><dd><p>“Rahukaalam or the period of Rahu is a certain amount of time every day
that is considered inauspicious for any new venture according to Indian
Vedic astrology”.</p>
</dd>
<dt>Moonrise and Moonset</dt><dd><p>Like the Sun but for the moon</p>
</dd>
<dt>Moon Azimuth and Zenith</dt><dd><p>Also like the Sun but for the moon</p>
</dd>
<dt>Moon Phase</dt><dd><p>The phase of the moon for a specified date.</p>
</dd>
</dl>
<p>Astral also comes with a geocoder containing a local database that allows you
to look up information for a small set of locations (<a class="reference internal" href="#additional-locations">new locations can be
added</a>).</p>
</section>
<section id="examples">
<h1>Examples<a class="headerlink" href="#examples" title="Link to this heading">#</a></h1>
<p>The following examples demonstrates some of the functionality available in the
module</p>
<section id="sun">
<h2>Sun<a class="headerlink" href="#sun" title="Link to this heading">#</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">astral</span> <span class="kn">import</span> <span class="n">LocationInfo</span>
<span class="n">city</span> <span class="o">=</span> <span class="n">LocationInfo</span><span class="p">(</span><span class="s2">&quot;London&quot;</span><span class="p">,</span> <span class="s2">&quot;England&quot;</span><span class="p">,</span> <span class="s2">&quot;Europe/London&quot;</span><span class="p">,</span> <span class="mf">51.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.116</span><span class="p">)</span>
<span class="nb">print</span><span class="p">((</span>
    <span class="sa">f</span><span class="s2">&quot;Information for </span><span class="si">{</span><span class="n">city</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">city</span><span class="o">.</span><span class="n">region</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="sa">f</span><span class="s2">&quot;Timezone: </span><span class="si">{</span><span class="n">city</span><span class="o">.</span><span class="n">timezone</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="sa">f</span><span class="s2">&quot;Latitude: </span><span class="si">{</span><span class="n">city</span><span class="o">.</span><span class="n">latitude</span><span class="si">:</span><span class="s2">.02f</span><span class="si">}</span><span class="s2">; Longitude: </span><span class="si">{</span><span class="n">city</span><span class="o">.</span><span class="n">longitude</span><span class="si">:</span><span class="s2">.02f</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
<span class="p">))</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Information for London/England
Timezone: Europe/London
Latitude: 51.50; Longitude: -0.12
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">astral.sun</span> <span class="kn">import</span> <span class="n">sun</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">sun</span><span class="p">(</span><span class="n">city</span><span class="o">.</span><span class="n">observer</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">22</span><span class="p">))</span>
<span class="nb">print</span><span class="p">((</span>
    <span class="sa">f</span><span class="s1">&#39;Dawn:    </span><span class="si">{</span><span class="n">s</span><span class="p">[</span><span class="s2">&quot;dawn&quot;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="sa">f</span><span class="s1">&#39;Sunrise: </span><span class="si">{</span><span class="n">s</span><span class="p">[</span><span class="s2">&quot;sunrise&quot;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="sa">f</span><span class="s1">&#39;Noon:    </span><span class="si">{</span><span class="n">s</span><span class="p">[</span><span class="s2">&quot;noon&quot;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="sa">f</span><span class="s1">&#39;Sunset:  </span><span class="si">{</span><span class="n">s</span><span class="p">[</span><span class="s2">&quot;sunset&quot;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="sa">f</span><span class="s1">&#39;Dusk:    </span><span class="si">{</span><span class="n">s</span><span class="p">[</span><span class="s2">&quot;dusk&quot;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
<span class="p">))</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Dawn:    2009-04-22 04:13:04.997608+00:00
Sunrise: 2009-04-22 04:50:17.127004+00:00
Noon:    2009-04-22 11:59:02+00:00
Sunset:  2009-04-22 19:08:41.711407+00:00
Dusk:    2009-04-22 19:46:06.423846+00:00
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The example above calculates the times of the sun in the UTC timezone.
If you want to return times in a different timezone you can pass the
<cite>tzinfo</cite> parameter to the function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">city</span> <span class="o">=</span> <span class="n">LocationInfo</span><span class="p">(</span><span class="s2">&quot;London&quot;</span><span class="p">,</span> <span class="s2">&quot;England&quot;</span><span class="p">,</span> <span class="s2">&quot;Europe/London&quot;</span><span class="p">,</span> <span class="mf">51.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.116</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">london</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="n">city</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">sun</span><span class="p">(</span><span class="n">city</span><span class="o">.</span><span class="n">observer</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">22</span><span class="p">),</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">london</span><span class="o">.</span><span class="n">timezone</span><span class="p">)</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">timezone</span> <span class="o">=</span> <span class="n">zoneinfo</span><span class="o">.</span><span class="n">ZoneInfo</span><span class="p">(</span><span class="s2">&quot;Europe/London&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">sun</span><span class="p">(</span><span class="n">city</span><span class="o">.</span><span class="n">observer</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2009</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">22</span><span class="p">),</span> <span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="moon">
<h2>Moon<a class="headerlink" href="#moon" title="Link to this heading">#</a></h2>
<p>The moon rise/set times can be obtained like the sun’s functions</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">astral</span> <span class="kn">import</span> <span class="n">LocationInfo</span>
<span class="n">city</span> <span class="o">=</span> <span class="n">LocationInfo</span><span class="p">(</span><span class="s2">&quot;London&quot;</span><span class="p">,</span> <span class="s2">&quot;England&quot;</span><span class="p">,</span> <span class="s2">&quot;Europe/London&quot;</span><span class="p">,</span> <span class="mf">51.5</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.116</span><span class="p">)</span>

<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">astral.moon</span> <span class="kn">import</span> <span class="n">moonrise</span>
<span class="kn">from</span> <span class="nn">astral.location</span> <span class="kn">import</span> <span class="n">Location</span>
<span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">28</span><span class="p">)</span>
<span class="n">london</span> <span class="o">=</span> <span class="n">Location</span><span class="p">(</span><span class="n">city</span><span class="p">)</span>
<span class="n">rise</span> <span class="o">=</span> <span class="n">moonrise</span><span class="p">(</span><span class="n">city</span><span class="o">.</span><span class="n">observer</span><span class="p">,</span> <span class="n">dt</span><span class="p">)</span>  <span class="c1"># returns a UTC time</span>
<span class="nb">print</span><span class="p">(</span><span class="n">rise</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>2021-10-28 22:02:00+00:00
</pre></div>
</div>
<p>And for a local time</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rise</span> <span class="o">=</span> <span class="n">moonrise</span><span class="p">(</span><span class="n">city</span><span class="o">.</span><span class="n">observer</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">city</span><span class="o">.</span><span class="n">tzinfo</span><span class="p">)</span>
</pre></div>
</div>
<section id="phase">
<h3>Phase<a class="headerlink" href="#phase" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">astral</span> <span class="kn">import</span> <span class="n">moon</span>
<span class="n">phase</span> <span class="o">=</span> <span class="n">moon</span><span class="o">.</span><span class="n">phase</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">phase</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>13.255666666666668
</pre></div>
</div>
<p>The moon phase method returns an number describing the phase, where the value
is between 0 and 27.99. The following lists the mapping of various values to
the description of the phase of the moon.</p>
<table class="table">
<tbody>
<tr class="row-odd"><td><p>0 .. 6.99</p></td>
<td><p>New moon</p></td>
</tr>
<tr class="row-even"><td><p>7 .. 13.99</p></td>
<td><p>First quarter</p></td>
</tr>
<tr class="row-odd"><td><p>14 .. 20.99</p></td>
<td><p>Full moon</p></td>
</tr>
<tr class="row-even"><td><p>21 .. 27.99</p></td>
<td><p>Last quarter</p></td>
</tr>
</tbody>
</table>
<p>If for example the number returned was 27.99 then the moon would be almost at
the New Moon phase, and if it was 24.00 it would be half way between the Last
Quarter and a New Moon.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The moon phase does not depend on your location. However what the moon
actually looks like to you does depend on your location. If you’re in the
southern hemisphere it looks different than if you were in the northern
hemisphere.</p>
<p>See <a class="reference external" href="http://moongazer.x10.mx/website/astronomy/moon-phases/">http://moongazer.x10.mx/website/astronomy/moon-phases/</a> for an example.</p>
<p>For an example of using this library to generate moon phases including the
names in various languages and the correct Unicode glyphs see the
<a class="reference external" href="https://github.com/PanderMusubi/lunar-phase-calendar/">project by PanderMusubi</a>
on Github.</p>
</div>
</section>
</section>
<section id="geocoder">
<h2>Geocoder<a class="headerlink" href="#geocoder" title="Link to this heading">#</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astral.geocoder</span> <span class="kn">import</span> <span class="n">database</span><span class="p">,</span> <span class="n">lookup</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lookup</span><span class="p">(</span><span class="s2">&quot;London&quot;</span><span class="p">,</span> <span class="n">database</span><span class="p">())</span>
<span class="go">LocationInfo(name=&#39;London&#39;, region=&#39;England&#39;, timezone=&#39;Europe/London&#39;,</span>
<span class="go">    latitude=51.473333333333336, longitude=-0.0008333333333333334)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Location elevations have been removed from the database. These were added
due to a misunderstanding of the affect of elevation on the times of the
sun. These are not required for the calculations, only the elevation of the
observer above/below the location is needed.</p>
<p>See <a class="reference internal" href="#effect-of-elevation">Effect of Elevation</a> below.</p>
</div>
<section id="custom-location">
<h3>Custom Location<a class="headerlink" href="#custom-location" title="Link to this heading">#</a></h3>
<p>If you only need a single location that is not in the database then you can
construct a <a class="reference internal" href="package.html#astral.LocationInfo" title="astral.LocationInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocationInfo</span></code></a> and fill in the values, either on
initialization</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">astral</span> <span class="kn">import</span> <span class="n">LocationInfo</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">LocationInfo</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;region&#39;</span><span class="p">,</span> <span class="s1">&#39;timezone/name&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">)</span>
</pre></div>
</div>
<p>or set the attributes after initialization:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">astral</span> <span class="kn">import</span> <span class="n">LocationInfo</span>
<span class="n">l</span> <span class="o">=</span> <span class="n">LocationInfo</span><span class="p">()</span>
<span class="n">l</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;name&#39;</span>
<span class="n">l</span><span class="o">.</span><span class="n">region</span> <span class="o">=</span> <span class="s1">&#39;region&#39;</span>
<span class="n">l</span><span class="o">.</span><span class="n">timezone</span> <span class="o">=</span> <span class="s1">&#39;US/Central&#39;</span>
<span class="n">l</span><span class="o">.</span><span class="n">latitude</span> <span class="o">=</span> <span class="mf">0.1</span>
<span class="n">l</span><span class="o">.</span><span class="n">longitude</span> <span class="o">=</span> <span class="mf">1.2</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><cite>name</cite> and <cite>region</cite> can be anything you like.</p>
</div>
</section>
<section id="additional-locations">
<span id="id1"></span><h3>Additional Locations<a class="headerlink" href="#additional-locations" title="Link to this heading">#</a></h3>
<p>You can add to the list of available locations using the
<a class="reference internal" href="package.html#astral.geocoder.add_locations" title="astral.geocoder.add_locations"><code class="xref py py-func docutils literal notranslate"><span class="pre">add_locations()</span></code></a> function and passing either a string
with one line per location or by passing a list containing strings, lists or
tuples (lists and tuples are passed directly to the LocationInfo constructor).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astral.geocoder</span> <span class="kn">import</span> <span class="n">add_locations</span><span class="p">,</span> <span class="n">database</span><span class="p">,</span> <span class="n">lookup</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">db</span> <span class="o">=</span> <span class="n">database</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">lookup</span><span class="p">(</span><span class="s2">&quot;Somewhere&quot;</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Somewhere not found&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">Somewhere not found</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">add_locations</span><span class="p">(</span><span class="s2">&quot;Somewhere,Secret Location,UTC,24°28&#39;N,39°36&#39;E&quot;</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lookup</span><span class="p">(</span><span class="s2">&quot;Somewhere&quot;</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
<span class="go">LocationInfo(name=&#39;Somewhere&#39;, region=&#39;Secret Location&#39;, timezone=&#39;UTC&#39;,</span>
<span class="go">    latitude=24.466666666666665, longitude=39.6)</span>
</pre></div>
</div>
</section>
<section id="timezone-groups">
<h3>Timezone Groups<a class="headerlink" href="#timezone-groups" title="Link to this heading">#</a></h3>
<p>Timezone groups such as Europe can be accessed via the <code class="xref py py-func docutils literal notranslate"><span class="pre">group()</span></code> function
in the <a class="reference internal" href="package.html#module-astral.geocoder" title="astral.geocoder"><code class="xref py py-mod docutils literal notranslate"><span class="pre">geocoder</span></code></a> module</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">astral.geocoder</span> <span class="kn">import</span> <span class="n">group</span><span class="p">,</span> <span class="n">database</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">database</span><span class="p">()</span>
<span class="n">europe</span> <span class="o">=</span> <span class="n">group</span><span class="p">(</span><span class="s2">&quot;europe&quot;</span><span class="p">,</span> <span class="n">db</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">europe</span><span class="o">.</span><span class="n">keys</span><span class="p">())[:</span><span class="mi">4</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[&#39;aberdeen&#39;, &#39;amsterdam&#39;, &#39;andorra_la_vella&#39;, &#39;ankara&#39;]
</pre></div>
</div>
</section>
</section>
</section>
<section id="effect-of-elevation">
<h1>Effect of Elevation<a class="headerlink" href="#effect-of-elevation" title="Link to this heading">#</a></h1>
<section id="times-of-the-sun">
<h2>Times Of The Sun<a class="headerlink" href="#times-of-the-sun" title="Link to this heading">#</a></h2>
<p>The times of the sun that you experience depend on what obscurs your view of
it. It may either be obscured by the horizon or some other geographical
feature (e.g. mountains)</p>
<ol class="arabic">
<li><p>If what obscures you at ground level is the horizon and you are at a
elevation above ground level then the times of the sun depends on how far
further round the earth you can see due to your elevation (the sun rises
earlier and sets later).</p>
<p>The extra angle you can see round the earth is determined by calculating the
angle α in the image below based on your elevation above ground level,
and adding this to the depression angle for the sun calculations.</p>
<img alt="_images/elevation_horizon.svg" class="adjustment" src="_images/elevation_horizon.svg" /></li>
<li><p>If your view is obscured by some other geographical feature than the
horizon, then the adjustment angle is based on how far you are above or
below the feature and your distance to it.</p></li>
</ol>
<p>For the first case i.e. obscured by the horizon you need to pass a single float
to the Observer as its elevation. For the second case pass a tuple of 2
floats. The first being the vertical distance to the top of the feature and
the second the horizontal distance to the feature.</p>
</section>
<section id="elevation-of-the-sun">
<h2>Elevation Of The Sun<a class="headerlink" href="#elevation-of-the-sun" title="Link to this heading">#</a></h2>
<p>Even though an observer’s elevation can significantly affect the times of the
sun the same is not true for the elevation angle from the observer to the sun.</p>
<p>As an example the diagram below shows the difference in angle between an
observer at ground level and one on the ISS orbiting 408 km above the earth.</p>
<img alt="_images/elevation_sun.svg" class="adjustment" src="_images/elevation_sun.svg" /><p>The largest difference between the two angles is when the angle at ground
level is 1 degree. The difference then is approximately 0.15 degrees.</p>
<p>At the summit of mount Everest (8,848 m) the maximum difference is
0.00338821 degrees.</p>
<p>Due to the very small difference the astral package does not currently adjust
the solar elevation for changes in observer elevation.</p>
</section>
</section>
<section id="effect-of-refraction">
<h1>Effect of Refraction<a class="headerlink" href="#effect-of-refraction" title="Link to this heading">#</a></h1>
<p>When viewing the sun the position you see it at is different from its actual
position due to the effect of atmospheric <a class="reference external" href="https://en.wikipedia.org/wiki/Refraction">refraction</a> which
makes the sun appear to be higher in the sky. The calculations in the
package take this refraction into account.</p>
<p>The <a class="reference internal" href="package.html#astral.sun.sunrise" title="astral.sun.sunrise"><code class="xref py py-func docutils literal notranslate"><span class="pre">sunrise()</span></code></a> and <a class="reference internal" href="package.html#astral.sun.sunset" title="astral.sun.sunset"><code class="xref py py-func docutils literal notranslate"><span class="pre">sunset()</span></code></a> functions
use the refraction at an angle when the sun is half of its apparent diameter
below the horizon. This is between about 30 and 32 arcminutes and for the
astral package a value of 32” is used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The refraction calculation does not take into account
temperature and pressure which can affect the angle of refraction.</p>
</div>
</section>
<section id="license">
<h1>License<a class="headerlink" href="#license" title="Link to this heading">#</a></h1>
<p>This module is licensed under the terms of the <a class="reference external" href="http://www.opensource.org/licenses/apache2.0.php">Apache</a> V2.0 license.</p>
</section>
<section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Link to this heading">#</a></h1>
<p>To install Astral you should use the <a class="reference external" href="https://pip.pypa.io/en/stable/">pip</a> tool:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="n">astral</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Now that we are Python 3 only and pip provides a versioned executable on
Windows you should use the <cite>pip3</cite> command on all operating systems
to ensure you are targetting the right Python version.</p>
</div>
</section>
<section id="cities">
<h1>Cities<a class="headerlink" href="#cities" title="Link to this heading">#</a></h1>
<p>The module includes location and time zone data for the following cities.
The list includes all capital cities plus some from the UK. The list also
includes the US state capitals and some other US cities.</p>
<p>Aberdeen, Abu Dhabi, Abu Dhabi, Abuja, Accra, Addis Ababa, Adelaide, Al Jubail,
Albany, Albuquerque, Algiers, Amman, Amsterdam, Anchorage, Andorra la Vella,
Ankara, Annapolis, Antananarivo, Apia, Ashgabat, Asmara, Astana, Asuncion,
Athens, Atlanta, Augusta, Austin, Avarua, Baghdad, Baku, Baltimore, Bamako,
Bandar Seri Begawan, Bangkok, Bangui, Banjul, Barrow-In-Furness, Basse-Terre,
Basseterre, Baton Rouge, Beijing, Beirut, Belfast, Belgrade, Belmopan, Berlin,
Bern, Billings, Birmingham, Birmingham, Bishkek, Bismarck, Bissau,
Bloemfontein, Bogota, Boise, Bolton, Boston, Bradford, Brasilia, Bratislava,
Brazzaville, Bridgeport, Bridgetown, Brisbane, Bristol, Brussels, Bucharest,
Bucuresti, Budapest, Buenos Aires, Buffalo, Bujumbura, Burlington, Cairo,
Canberra, Cape Town, Caracas, Cardiff, Carson City, Castries, Cayenne,
Charleston, Charlotte, Charlotte Amalie, Cheyenne, Chicago, Chisinau,
Cleveland, Columbia, Columbus, Conakry, Concord, Copenhagen, Cotonou, Crawley,
Dakar, Dallas, Damascus, Dammam, Denver, Des Moines, Detroit, Dhaka, Dili,
Djibouti, Dodoma, Doha, Douglas, Dover, Dublin, Dushanbe, Edinburgh, El Aaiun,
Fargo, Fort-de-France, Frankfort, Freetown, Funafuti, Gaborone, George Town,
Georgetown, Gibraltar, Glasgow, Greenwich, Guatemala, Hanoi, Harare,
Harrisburg, Hartford, Havana, Helena, Helsinki, Hobart, Hong Kong, Honiara,
Honolulu, Houston, Indianapolis, Islamabad, Jackson, Jacksonville, Jakarta,
Jefferson City, Jerusalem, Juba, Jubail, Juneau, Kabul, Kampala, Kansas City,
Kathmandu, Khartoum, Kiev, Kigali, Kingston, Kingston, Kingstown, Kinshasa,
Koror, Kuala Lumpur, Kuwait, La Paz, Lansing, Las Vegas, Leeds, Leicester,
Libreville, Lilongwe, Lima, Lincoln, Lisbon, Little Rock, Liverpool, Ljubljana,
Lome, London, Los Angeles, Louisville, Luanda, Lusaka, Luxembourg, Macau,
Madinah, Madison, Madrid, Majuro, Makkah, Malabo, Male, Mamoudzou, Managua,
Manama, Manchester, Manchester, Manila, Maputo, Maseru, Masqat, Mbabane, Mecca,
Medina, Melbourne, Memphis, Mexico, Miami, Milwaukee, Minneapolis, Minsk,
Mogadishu, Monaco, Monrovia, Montevideo, Montgomery, Montpelier, Moroni,
Moscow, Moskva, Mumbai, Muscat, N’Djamena, Nairobi, Nashville, Nassau,
Naypyidaw, New Delhi, New Orleans, New York, Newark, Newcastle, Newcastle Upon
Tyne, Ngerulmud, Niamey, Nicosia, Norwich, Nouakchott, Noumea, Nuku’alofa,
Nuuk, Oklahoma City, Olympia, Omaha, Oranjestad, Orlando, Oslo, Ottawa,
Ouagadougou, Oxford, P’yongyang, Pago Pago, Palikir, Panama, Papeete,
Paramaribo, Paris, Perth, Philadelphia, Phnom Penh, Phoenix, Pierre, Plymouth,
Podgorica, Port Louis, Port Moresby, Port of Spain, Port-Vila, Port-au-Prince,
Portland, Portland, Porto-Novo, Portsmouth, Prague, Praia, Pretoria, Pristina,
Providence, Quito, Rabat, Raleigh, Reading, Reykjavik, Richmond, Riga, Riyadh,
Road Town, Rome, Roseau, Sacramento, Saint Helier, Saint Paul, Saint Pierre,
Saipan, Salem, Salt Lake City, San Diego, San Francisco, San Jose, San Juan,
San Marino, San Salvador, Sana, Sana’a, Santa Fe, Santiago, Santo Domingo, Sao
Tome, Sarajevo, Seattle, Seoul, Sheffield, Singapore, Sioux Falls, Skopje,
Sofia, Southampton, Springfield, Sri Jayawardenapura Kotte, St. George’s, St.
John’s, St. Peter Port, Stanley, Stockholm, Sucre, Suva, Swansea, Swindon,
Sydney, T’bilisi, Taipei, Tallahassee, Tallinn, Tarawa, Tashkent, Tbilisi,
Tegucigalpa, Tehran, Thimphu, Tirana, Tirane, Tokyo, Toledo, Topeka, Torshavn,
Trenton, Tripoli, Tunis, Ulaanbaatar, Ulan Bator, Vaduz, Valletta, Vienna,
Vientiane, Vilnius, Virginia Beach, W. Indies, Warsaw, Washington DC,
Wellington, Wichita, Willemstad, Wilmington, Windhoek, Wolverhampton,
Yamoussoukro, Yangon, Yaounde, Yaren, Yerevan, Zagreb, Zurich</p>
<section id="us-cities">
<h2>US Cities<a class="headerlink" href="#us-cities" title="Link to this heading">#</a></h2>
<p>Albany, Albuquerque, Anchorage, Annapolis, Atlanta, Augusta, Austin, Baltimore,
Baton Rouge, Billings, Birmingham, Bismarck, Boise, Boston, Bridgeport,
Buffalo, Burlington, Carson City, Charleston, Charlotte, Cheyenne, Chicago,
Cleveland, Columbia, Columbus, Concord, Dallas, Denver, Des Moines, Detroit,
Dover, Fargo, Frankfort, Harrisburg, Hartford, Helena, Honolulu, Houston,
Indianapolis, Jackson, Jacksonville, Jefferson City, Juneau, Kansas City,
Lansing, Las Vegas, Lincoln, Little Rock, Los Angeles, Louisville, Madison,
Manchester, Memphis, Miami, Milwaukee, Minneapolis, Montgomery, Montpelier,
Nashville, New Orleans, New York, Newark, Oklahoma City, Olympia, Omaha,
Orlando, Philadelphia, Phoenix, Pierre, Portland, Portland, Providence,
Raleigh, Richmond, Sacramento, Saint Paul, Salem, Salt Lake City, San Diego,
San Francisco, Santa Fe, Seattle, Sioux Falls, Springfield, Tallahassee,
Toledo, Topeka, Trenton, Virginia Beach, Wichita, Wilmington</p>
</section>
</section>
<section id="thanks">
<h1>Thanks<a class="headerlink" href="#thanks" title="Link to this heading">#</a></h1>
<p>The sun calculations in this module were adapted, for Python, from the
spreadsheets on the following page.</p>
<blockquote>
<div><div class="line-block">
<div class="line"><a class="reference external" href="https://www.esrl.noaa.gov/gmd/grad/solcalc/calcdetails.html">https://www.esrl.noaa.gov/gmd/grad/solcalc/calcdetails.html</a></div>
</div>
</div></blockquote>
<p>Refraction calculation is taken from</p>
<blockquote>
<div><div class="line-block">
<div class="line">Sun-Pointing Programs and Their Accuracy</div>
<div class="line">John C. Zimmerman Of Sandia National Laboratones</div>
<div class="line"><a class="reference external" href="https://www.osti.gov/servlets/purl/6377969">https://www.osti.gov/servlets/purl/6377969</a></div>
</div>
</div></blockquote>
<p>Which cites the following as the original source</p>
<blockquote>
<div><div class="line-block">
<div class="line">In Solar Energy Vol 20 No.5-C</div>
<div class="line">Robert Walraven Of The University Of California, Davis</div>
</div>
</div></blockquote>
<p>Moon position calculations from</p>
<blockquote>
<div><div class="line-block">
<div class="line">LOW-PRECISION FORMULAE FOR PLANETARY POSITIONS</div>
<div class="line">T. C. Van Flandern and K. F. Pulkkinen</div>
</div>
</div></blockquote>
<p>And from</p>
<blockquote>
<div><div class="line-block">
<div class="line">Astronomical Algorithms</div>
<div class="line">Jean Meeus</div>
</div>
</div></blockquote>
<p>The moon phase calculation is based on javascript code
from Sky and Telescope magazine</p>
<blockquote>
<div><div class="line-block">
<div class="line">Moon-phase calculation</div>
<div class="line">Roger W. Sinnott, Sky &amp; Telescope, June 16, 2006.</div>
<div class="line"><a class="reference external" href="https://skyandtelescope.org/observing/the-phase-of-the-moon/">https://skyandtelescope.org/observing/the-phase-of-the-moon/</a></div>
</div>
</div></blockquote>
<p>Also to <a class="reference external" href="https://www.sphinx-doc.org/">Sphinx</a> for making doc generation an easy thing (not that the writing
of the docs is any easier.)</p>
</section>
<section id="contact">
<h1>Contact<a class="headerlink" href="#contact" title="Link to this heading">#</a></h1>
<p>Simon Kennedy &lt;<a class="reference external" href="mailto:sffjunkie+code&#37;&#52;&#48;gmail&#46;com">sffjunkie+code<span>&#64;</span>gmail<span>&#46;</span>com</a>&gt;</p>
</section>
<section id="version-history">
<h1>Version History<a class="headerlink" href="#version-history" title="Link to this heading">#</a></h1>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Version</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>3.2</p></td>
<td><p>Dropped Python 3.6 support as it has reached “End of Life”</p>
<p>Documentation now hosted on
<a class="reference external" href="https://sffjunkie.github.io/astral/">Github Pages</a></p>
</td>
</tr>
<tr class="row-odd"><td><p>3.1</p></td>
<td><p>Fix for <a class="reference external" href="https://github.com/sffjunkie/astral/issues/77">issue #77</a></p></td>
</tr>
<tr class="row-even"><td><p>3.0</p></td>
<td><p>Added moon rise, set, azimuth and zenith functions.https://github.com/sffjunkie/astral/issues/77</p>
<p>Switched from pytz to <cite>zoneinfo</cite> provided as part of Python &gt;= 3.9 or
<cite>backports.zoneinfo</cite> for older versions.</p>
<p>In some circumstances the result of the calculation of rise and
set times would return information for a different date. This
has now been fixed.</p>
</td>
</tr>
<tr class="row-odd"><td><p>2.2</p></td>
<td><p>Fix for <a class="reference external" href="https://github.com/sffjunkie/astral/issues/48">bug #48</a> - As per the bug report the angle to adjust for
the effect of elevation should have been θ (not α).</p>
<p>The sun functions can now also be passed a timezone name as a
string. Previously only a pytz timezone was accepted.</p>
</td>
</tr>
<tr class="row-even"><td><p>2.1</p></td>
<td><p>Fix for bug #44 - Incorrectly raised exception when UTC sun times
were on the day previous to the day asked for. Only manifested for
timezones with a large positive offset.</p></td>
</tr>
<tr class="row-odd"><td><p>2.0</p></td>
<td><p>This is a code refactor as well as an update so it is highly likely
that you will need to adapt your code to suit.</p>
<p>Astral, AstralGeocoder &amp; GoogleGeocoder classes removed</p>
<p>Now only compatible with Python 3.6 and greater due to the
use of data classes</p>
<p>New <a class="reference internal" href="package.html#astral.Observer" title="astral.Observer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Observer</span></code></a> data class to store a latitude,
longitude &amp; elevation</p>
<p>New <a class="reference internal" href="package.html#astral.LocationInfo" title="astral.LocationInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocationInfo</span></code></a> data class to store a location
name, region, timezone, latitude &amp; longitude</p>
<p>Geocoder functions return a <a class="reference internal" href="package.html#astral.LocationInfo" title="astral.LocationInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocationInfo</span></code></a> instead
of a <a class="reference internal" href="package.html#astral.location.Location" title="astral.location.Location"><code class="xref py py-class docutils literal notranslate"><span class="pre">Location</span></code></a></p>
<p>All calculations now automatically adjust for refraction.
For elevation you can return the true angle by setting the
<cite>with_refraction</cite> parameter to False.</p>
<p>The solar_noon and solar_midnight functions have been renamed to
<a class="reference internal" href="package.html#astral.sun.noon" title="astral.sun.noon"><code class="xref py py-func docutils literal notranslate"><span class="pre">noon()</span></code></a> and <a class="reference internal" href="package.html#astral.sun.midnight" title="astral.sun.midnight"><code class="xref py py-func docutils literal notranslate"><span class="pre">midnight()</span></code></a>
respectively.</p>
<p>Rahukaalam can now be calculated for night times.</p>
</td>
</tr>
<tr class="row-even"><td><p>1.10.1</p></td>
<td><p>Keyword args are now passed to the geocoder class from Astral
__init__ in order to allow the Google Maps API key to be passed to
the GoogleGeocoder.</p></td>
</tr>
<tr class="row-odd"><td><p>1.10</p></td>
<td><p>Added support to AstralGeocoder to add
<a class="reference internal" href="#additional-locations">additional locations</a>
to the database.</p></td>
</tr>
<tr class="row-even"><td><p>1.9.2</p></td>
<td><p>1.9 broke the sun_utc method. Sun UTC calculation passed incorrect
parameter to more specific methods e.g. sunrise, sunset etc.</p></td>
</tr>
<tr class="row-odd"><td><p>1.9.1</p></td>
<td><p>Correct version number in astral.py</p></td>
</tr>
<tr class="row-even"><td><p>1.9</p></td>
<td><p>Now takes elevation into account.</p></td>
</tr>
<tr class="row-odd"><td><p>1.8</p></td>
<td><p>Location methods now allow the timezone to be None which returns all
times as UTC.</p>
<p>Added command line interface to return ‘sun’ values</p>
</td>
</tr>
<tr class="row-even"><td><p>1.7.1</p></td>
<td><p>Changed GoogleGeocoder test to not use raise…from as this is not
valid for Python 2</p></td>
</tr>
<tr class="row-odd"><td><p>1.7</p></td>
<td><p>Requests is now only needed when using GoogleGeocoder</p>
<p>GoogleGeocoder now requires the <cite>api_key</cite> parameter to be passed to
the constructor as Google now require it for their API calls.</p>
</td>
</tr>
<tr class="row-even"><td><p>1.6.1</p></td>
<td><p>Updates for Travis CI integration / Github signed release.</p></td>
</tr>
<tr class="row-odd"><td><p>1.6</p></td>
<td><p>Added api_key parameter to the GoogleGeocoder <code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code>
method</p></td>
</tr>
<tr class="row-even"><td><p>1.5</p></td>
<td><p>Added parameter <cite>rtype</cite> to <code class="xref py py-meth docutils literal notranslate"><span class="pre">moon_phase()</span></code> to determine the
return type of the method.</p>
<p>Added example for calculating the phase of the moon.</p>
</td>
</tr>
<tr class="row-odd"><td><p>1.4.1</p></td>
<td><p>Using versioneer to manage version numbers</p></td>
</tr>
<tr class="row-even"><td><p>1.4</p></td>
<td><p>Changed to use calculations from NOAA spreadsheets</p>
<p>Changed some exception error messages for when sun does not reach
a requested elevation.</p>
<p>Added more tests</p>
</td>
</tr>
<tr class="row-odd"><td><p>1.3.4</p></td>
<td><p>Changes to project configuration files. No user facing changes.</p></td>
</tr>
<tr class="row-even"><td><p>1.3.3</p></td>
<td><p>Fixed call to twilight_utc as date and direction parameters
were reversed.</p></td>
</tr>
<tr class="row-odd"><td><p>1.3.2</p></td>
<td><p>Updated URL to point to gitgub.com</p>
<p>Added Apache 2.0 boilerplate to source file</p>
</td>
</tr>
<tr class="row-even"><td><p>1.3.1</p></td>
<td><p>Added LICENSE file to sdist</p></td>
</tr>
<tr class="row-odd"><td><p>1.3</p></td>
<td><p>Corrected solar zenith to return the angle from the vertical.</p>
<p>Added solar midnight calculation.</p>
</td>
</tr>
<tr class="row-even"><td><p>1.2</p></td>
<td><p>Added handling for when unicode literals are used. This may possibly
affect your code if you’re using Python 2 (there are tests for this
but they may not catch all uses.) (Bug <a class="reference external" href="https://bugs.launchpad.net/astral/+bug/1588198">1588198</a>)</p>
<p>Changed timezone for Phoenix, AZ to America/Phoenix
(Bug <a class="reference external" href="https://bugs.launchpad.net/astral/+bug/1561258">1561258</a>)</p>
</td>
</tr>
<tr class="row-odd"><td><p>1.1</p></td>
<td><p>Added methods to calculate Twilight, the Golden Hour and the Blue
Hour.</p></td>
</tr>
<tr class="row-even"><td><p>1.0</p></td>
<td><p>It’s time for a version 1.0</p>
<p>Added examples where the location you want is not in the Astral
geocoder.</p>
</td>
</tr>
<tr class="row-odd"><td><p>0.9</p></td>
<td><p>Added a method to calculate the date and time when the sun is at a
specific elevation, for either a rising or a setting sun.</p>
<p>Added daylight and night methods to Location and Astral classes.</p>
<p>Rahukaalam methods now return a tuple.</p>
</td>
</tr>
<tr class="row-even"><td><p>0.8.2</p></td>
<td><p>Fix for moon phase calcualtions which were off by 1.</p>
<p>Use pytz.timezone().localize method instead of passing tzinfo
parameter to datetime.datetime. See the <a class="reference external" href="http://pytz.sourceforge.net/#localized-times-and-date-arithmetic">pytz docs</a> for info</p>
</td>
</tr>
<tr class="row-odd"><td><p>0.8.1</p></td>
<td><p>Fix for bug <a class="reference external" href="https://bugs.launchpad.net/astral/+bug/1417641">1417641</a>: <code class="xref py py-meth docutils literal notranslate"><span class="pre">solar_elevation()</span></code> and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">solar_azimuth()</span></code> fail when a naive
<a class="reference external" href="http://docs.python.org/3/library/datetime.html#datetime.datetime" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">datetime</span></code></a> object is used.</p>
<p>Added <code class="xref py py-meth docutils literal notranslate"><span class="pre">solar_zenith()</span></code> methods to <code class="xref py py-class docutils literal notranslate"><span class="pre">Astral</span></code>
and <code class="xref py py-class docutils literal notranslate"><span class="pre">Location</span></code> as an
alias for <code class="xref py py-meth docutils literal notranslate"><span class="pre">solar_elevation()</span></code></p>
<p>Added <cite>tzinfo</cite> as an alias for <cite>tz</cite></p>
</td>
</tr>
<tr class="row-even"><td><p>0.8</p></td>
<td><p>Fix for bug <a class="reference external" href="https://bugs.launchpad.net/astral/+bug/1407773">1407773</a>: Moon phase calculation changed to remove
time zone parameter (tz) as it is not required for the calculation.</p></td>
</tr>
<tr class="row-odd"><td><p>0.7.5</p></td>
<td><p>Fix for bug <a class="reference external" href="https://bugs.launchpad.net/astral/+bug/1402103">1402103</a>: Buenos Aires incorrect timezone</p></td>
</tr>
<tr class="row-even"><td><p>0.7.4</p></td>
<td><p>Added Canadian cities from Yip Shing Ho</p></td>
</tr>
<tr class="row-odd"><td><p>0.7.3</p></td>
<td><p>Fix for bug <a class="reference external" href="https://bugs.launchpad.net/astral/+bug/1239387">1239387</a> submitted by Torbjörn Lönnemark</p></td>
</tr>
<tr class="row-even"><td><p>0.7.2</p></td>
<td><p>Minor bug fix in <code class="xref py py-class docutils literal notranslate"><span class="pre">GoogleGeocoder</span></code>. location name and
region are now stripped of whitespace</p></td>
</tr>
<tr class="row-odd"><td><p>0.7.1</p></td>
<td><p>Bug fix. Missed a vital return statement in the
<code class="xref py py-class docutils literal notranslate"><span class="pre">GoogleGeocoder</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0.7</p></td>
<td><p>Added ability to lookup location information from
Google’s mapping APIs (see <code class="xref py py-class docutils literal notranslate"><span class="pre">GoogleGeocoder</span></code>)</p>
<p>Renamed <code class="xref py py-class docutils literal notranslate"><span class="pre">City</span></code> class to <code class="xref py py-class docutils literal notranslate"><span class="pre">Location</span></code></p>
<p>Renamed <code class="xref py py-class docutils literal notranslate"><span class="pre">CityDB</span></code> to <code class="xref py py-class docutils literal notranslate"><span class="pre">AstralGeocoder</span></code></p>
<p>Added elevations of cities to database and property to
obtain elevation from <code class="xref py py-class docutils literal notranslate"><span class="pre">Location</span></code> class</p>
</td>
</tr>
<tr class="row-odd"><td><p>0.6.2</p></td>
<td><p>Added various cities to database as per
<a class="reference external" href="https://bugs.launchpad.net/astral/+bug/1040936">https://bugs.launchpad.net/astral/+bug/1040936</a></p></td>
</tr>
<tr class="row-even"><td><p>0.6.1</p></td>
<td><p>Docstrings were not updated to match changes to code.</p>
<p>Other minor docstring changes made</p>
</td>
</tr>
<tr class="row-odd"><td><p>0.6</p></td>
<td><p>Fix for bug <a class="reference external" href="https://bugs.launchpad.net/astral/+bug/884716">884716</a> submitted by Martin Heemskerk
regarding moon phase calculations</p>
<p>Fixes for bug report <a class="reference external" href="https://bugs.launchpad.net/astral/+bug/944754">944754</a> submitted by Hajo Werder</p>
<ul class="simple">
<li><p>Changed co-ordinate system so that eastern longitudes
are now positive</p></li>
<li><p>Added solar_depression property to City class</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>0.5</p></td>
<td><p>Changed <code class="xref py py-class docutils literal notranslate"><span class="pre">City</span></code> to accept unicode name and country.</p>
<p>Moved city information into a database class <code class="xref py py-class docutils literal notranslate"><span class="pre">CityDB</span></code></p>
<p>Added attribute access to database for timezone groups</p>
</td>
</tr>
<tr class="row-odd"><td><p>0.4</p></td>
<td><p>Duplicate city names could not be accessed.</p>
<p>Sun calculations for some cities failed with times
outside valid ranges.</p>
<p>Fixes for city data.</p>
<p>Added calculation for moon phase.</p>
</td>
</tr>
<tr class="row-even"><td><p>0.3</p></td>
<td><p>Changed to <a class="reference external" href="http://www.opensource.org/licenses/apache2.0.php">Apache</a> V2.0 license.</p>
<p>Fix for bug <a class="reference external" href="https://bugs.launchpad.net/astral/+bug/555508">555508</a> submitted by me.</p>
<p>US state capitals and other cities added.</p>
</td>
</tr>
<tr class="row-odd"><td><p>0.2</p></td>
<td><p>Fix for bug <a class="reference external" href="https://bugs.launchpad.net/astral/+bug/554041">554041</a> submitted by Derek_ / John Dimatos</p></td>
</tr>
<tr class="row-even"><td><p>0.1</p></td>
<td><p>First release</p></td>
</tr>
</tbody>
</table>
<div class="toctree-wrapper compound">
</div>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="right-next"
       href="package.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">The <code class="xref py py-mod docutils literal notranslate"><span class="pre">astral</span></code> Package</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Astral v3.2</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">Examples</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sun">Sun</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#moon">Moon</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#phase">Phase</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#geocoder">Geocoder</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#custom-location">Custom Location</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-locations">Additional Locations</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#timezone-groups">Timezone Groups</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#effect-of-elevation">Effect of Elevation</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#times-of-the-sun">Times Of The Sun</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#elevation-of-the-sun">Elevation Of The Sun</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#effect-of-refraction">Effect of Refraction</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#license">License</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#cities">Cities</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#us-cities">US Cities</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#thanks">Thanks</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#contact">Contact</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#version-history">Version History</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Simon Kennedy
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2009-1980, Simon Kennedy.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>